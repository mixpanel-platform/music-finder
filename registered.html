
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Good Music">
    <meta name="author" content="Scott Marinoff">
    <!-- <link rel="icon" href="../../favicon.ico"> -->

    <title>Welcome | Music Finder</title>

    <script type="text/javascript" src="js/musicfinder.js"></script>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- jQuery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <!-- <link href="jumbotron.css" rel="stylesheet"> -->
  </head>

  <body>

    <script type="text/javascript">
      mixpanel.register_once({"Account Created Date": new Date().toISOString()});

      mixpanel.register({
        "Plan": "Free", 
        "$email": getQueryParam("email")
      });

      mixpanel.track("Signup", {
        "Plan": "Free",
        "Revenue": 0
      })

      mixpanel.people.set({
        "$name": getQueryParam("name"), 
        "$email": getQueryParam("email"), 
        "Age at Signup": getQueryParam("age"),
        "Newsletter": getQueryParam("newsletter"),
        "$created": new Date(),
        "Date Last Seen": new Date(),
        "Plan": "Free",
        "Lifetime Listens": 0,
        "Preferred Genres": getQueryParam("optionsRadios")
      });
      mixpanel.identify();
    </script>

    <nav class="navbar navbar-static-top navbar-dark bg-inverse">
      <a class="navbar-brand" href="/">Music Finder</a>
      <ul class="nav navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="/">Welcome <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about.html">About</a>
        </li>
      </ul>
    </nav>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1 class="display-3">Welcome, <script type="text/javascript">document.write(getQueryParam("name"));</script>!</h1>
        <p>Let's listen to some <script type="text/javascript">document.write(getQueryParam("optionsRadios"));</script>!</p>
        <br>
        <div id="player" onmouseover=></div>

        <script type="text/javascript">
          var genre = getQueryParam("optionsRadios");
          var songId = "";

          if (genre == "folk") {
            SongId = "FnnjhArueNY"
          }
          if (genre == "rock") {
            SongId = "6OGEiOgv86U"
          }
          if (genre == "rap") {
            SongId = "GhWIZDYGDrA"
          }
          if (genre == "electronic") {
            SongId = "dCmJ5KmCKMs"
          }

          // 2. This code loads the IFrame Player API code asynchronously.
          var tag = document.createElement('script');

          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          // 3. This function creates an <iframe> (and YouTube player)
          //    after the API code downloads.
          var player;
          function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: SongId,
              playerVars: { 'autoplay': 0 },
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
          }

          // 4. The API will call this function when the video player is ready.
          function onPlayerReady(event) {
            // event.target.playVideo();
          }

          // 5. The API calls this function when the player's state changes.
          //    The function indicates that when playing a video (state=1),
          //    the player should play for six seconds and then stop.
          var done = false;
          function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && !done) {
              // setTimeout(stopVideo, 6000);
              if (SongId == "FnnjhArueNY") {
                var song = "Buried in Teeth";
                var artist = "Mariee Sioux";
              };
              if (SongId == "6OGEiOgv86U") {
                var song = "Doin' the Cockroach";
                var artist = "Modest Mouse";
                
              };
              if (SongId == "GhWIZDYGDrA") {
                var song = "One Mic";
                var artist = "Nas";
                
              };
              if (SongId == "dCmJ5KmCKMs") {
                var song = "Live in the Boiler Room";
                var artist = "Andy Stott";
                
              };
              mixpanel.track("Played song", {"Song played": song, "Artist": artist});
              mixpanel.people.increment("Total Songs Played");
              done = true;
            }
            if (event.data == YT.PlayerState.ENDED) {
              //
            }
          }
          function stopVideo() {
            player.stopVideo();
          }
        </script>
      </div>
    </div>

    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-md-4">
          <h2>Folk</h2>
          <p>Each country has their own folk music, but the genre usually refers to American and British music that has been passed through the generations by oral tradition. It's simple, acoustic-based music that spins everyday events and common people into mythic status. Many traditional folksongs have no known author, they have simply evolved over the years. </p>
          <p><a class="btn btn-secondary" href="/listen/folk.html" role="button">Listen &raquo;</a></p>
        </div>
        <div class="col-md-4">
          <h2>Rock</h2>
          <p>Rock & Roll is often used as a generic term, but its sound is rarely predictable. From the outset, when the early rockers merged country and blues, rock has been defined by its energy, rebellion and catchy hooks, but as the genre aged, it began to shed those very characteristics, placing equal emphasis on craftmanship and pushing the boundaries of the music. </p>
          <p><a class="btn btn-secondary" href="/listen/rock.html" role="button">Listen &raquo;</a></p>
       </div>
        <div class="col-md-4">
          <h2>Rap</h2>
          <p>Rap's germination is sometimes attributed to the righteous street poetry of the Last Poets and the Watts Prophets, but it didn't begin to take full shape -- and earn its tag -- until after the Sugarhill Gang released "Rapper's Delight" in 1979. Since then, rap spread from its New York epicenter throughout the remainder of the U.S. (with each region taking on its own specific flavor) and then to countless countries. </p>
          <p><a class="btn btn-secondary" href="/listen/rap.html" role="button">Listen &raquo;</a></p>
        </div>
      </div>

      <hr>

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
